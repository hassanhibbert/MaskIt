"use strict";HTMLElement.prototype.MaskIt=function(t,n){this.maskValue="",this.maskPattern=t.split(""),this.maskElement=this,this.maskDefinitions={0:{pattern:/\d/},A:{pattern:/[a-zA-Z]/},Z:{pattern:/[a-zA-Z0-9]/}},this.defaults={maskOnInput:!0,maskOnChange:!1,onInvalidHandler:null,onInputHandler:null,onChangeHandler:null,onComplete:null,maskDefinitions:null},this.init=function(){this.setOptions(),this.initializeEvents()},this.setOptions=function(){this.options=this.isObject(n)?this.extend(this.defaults,n):this.defaults,this.options.maskDefinitions&&this.extend(this.maskDefinitions,this.options.maskDefinitions)},this.initializeEvents=function(){this.options.maskOnChange&&this.setListeners(this.maskElement,"change",this.events.onChangeHandler,!0),this.options.maskOnInput&&this.setListeners(this.maskElement,"input",this.events.onInputHandler,!0)},this.mask=function(t){for(var n,e,s,i,a,o,h,l=t.split(""),r=this.maskPattern,u=this.maskDefinitions,p=Object.keys(u),c=0,g=r.length;g>c;c+=1)o=r[c],n=p.indexOf(o)<0,e=o===l[c],i=l.length,o&&n&&i>c?!e&&l.splice(c,0,o):l[c]&&u[o]&&!u[o].pattern.test(l[c])?(h="The character "+l[c]+" does not match this pattern: "+u[o].pattern,this.isFunction(this.options.onInvalidHandler)&&this.options.onInvalidHandler.call(null,h,l[c],u[o].pattern),l.splice(c,1),c-=1):o&&i>=c&&n&&i>this.maskValue.length&&!e&&l.splice(c,0,o);return a=l.join(""),this.isFunction(this.options.onComplete)&&l.length===r.length&&this.options.onComplete.call(null,a),a.length<=r.length?this.maskValue=a:a.length>r.length&&(s=a.length-r.length,l.splice(r.length,s),this.maskValue=l.join("")),this.maskValue},this.destroyEvents=function(){this.removeListeners.call(this)},this.removeListeners=function(){this.options.maskOnChange&&this.setListeners(this.maskElement,"change",this.events.onChangeHandler,!1),this.options.maskOnInput&&this.setListeners(this.maskElement,"input",this.events.onInputHandler,!1)},this._onChangeHandler=function(t){t.preventDefault(),this.options.onChangeHandler?this.options.onChangeHandler.call(null,t.target,this.mask(t.target.value)):t.target.value=this.mask(t.target.value)},this._onInputHandler=function(t){t.preventDefault();var n,e,s=this.maskValue.length,i=this.getCaretPosition(t.target);this.options.onInputHandler||(t.target.value=this.mask(t.target.value),n=t.target.value.length,e=n>s&&""===t.target.value.charAt(i+1).trim()?i+1:i,this.setCaretPosition(t.target,e))},this.getCaretPosition=function(t){if(t.selectionStart){var n=0,e=t.selectionStart;return(e||0===e)&&(n=e),n}},this.setCaretPosition=function(t,n){t.setSelectionRange&&(t.focus(),t.setSelectionRange(n,n))},this.extend=function(t,n){var e;for(e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t},this.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},this.isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},this.setListeners=function(t,n,e,s){var i=(s?"add":"remove")+"EventListener";t[i](n,e,!1)},this.events={onChangeHandler:this._onChangeHandler.bind(this),onInputHandler:this._onInputHandler.bind(this)},this.init()};