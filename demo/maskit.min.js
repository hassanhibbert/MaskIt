"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}!function(t){function n(t){for(var e=arguments.length,l=Array(e>1?e-1:0),h=1;h<e;h++)l[h-1]=arguments[h];if(!(this instanceof n))return new(Function.prototype.bind.apply(n,[null].concat([t],l)));var c,p=this;if(this.maskValue="",this.maskPattern=t.split(""),this.maskElement=!r(l[0])&&u(l[0]),this.caretState=new Array(3),this.events={onChangeHandler:s.bind(p),onInputHandler:i.bind(p)},this.maskDefinitions={0:{pattern:/\d/},A:{pattern:/[a-zA-Z]/},Z:{pattern:/[a-zA-Z0-9]/}},c={maskOnInput:!0,maskOnChange:!1,onInvalidHandler:null,onInputHandler:null,onChangeHandler:null,onComplete:null,maskDefinitions:null},this.options=r(l[1]||l[0])?o(c,l[1]||l[0]):c,this.options.maskDefinitions&&o(this.maskDefinitions,this.options.maskDefinitions),this.maskElement){for(var m=0,g=this.maskElement.length;m<g;m+=1)this.maskElement[m].value=this.mask(this.maskElement[m].value);a.call(this)}}function e(){this.options.maskOnChange&&c(this.maskElement,"change",this.events.onChangeHandler,!1),this.options.maskOnInput&&c(this.maskElement,"input",this.events.onInputHandler,!1)}function a(){this.options.maskOnChange&&c(this.maskElement,"change",this.events.onChangeHandler,!0),this.options.maskOnInput&&c(this.maskElement,"input",this.events.onInputHandler,!0)}function s(t){t.preventDefault(),this.options.onChangeHandler?this.options.onChangeHandler.call(null,t.target,this.mask(t.target.value)):t.target.value=this.mask(t.target.value)}function i(t){t.preventDefault();var n=l.call(this,t.target);this.options.onInputHandler?this.options.onInputHandler.call(null,t.target,this.mask(t.target.value)):(t.target.value=this.mask(t.target.value),n.call(this))}function l(t){var n=0,e=t.selectionStart,a=this.caretState;return(e||0===e)&&(n=e),function(){a.length>=3&&a.splice(0,1),a.push(t.value.length),t.focus(),a[0]>a[1]&&a[2]>a[1]?t.setSelectionRange(n,n):a[1]>=a[2]?t.setSelectionRange(n,n):a[1]<a[2]&&t.setSelectionRange(n+1,n+1)}}function o(t,n){var e;for(e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function r(t){return"[object Object]"===Object.prototype.toString.call(t)}function h(t){return"[object Function]"===Object.prototype.toString.call(t)}function u(t){return"string"==typeof t?[].concat(_toConsumableArray(document.querySelectorAll(t))):"undefined"==typeof t||t instanceof Array?t:[t]}function c(t,n,e,a){for(var s=(a?"add":"remove")+"EventListener",i=0,l=t.length;i<l;i++)t[i][s](n,e,!1)}n.prototype={mask:function(t){for(var n,e,a,s,i,l,o,r=t.split(""),u=this.maskPattern,c=this.maskDefinitions,p=Object.keys(c),m=0,g=u.length;m<g;m+=1)l=u[m],n=p.indexOf(l)<0,e=l===r[m],s=r.length,l&&n&&m<s?!e&&r.splice(m,0,l):r[m]&&c[l]&&!c[l].pattern.test(r[m])?(o="The character "+r[m]+" does not match this pattern: "+c[l].pattern,h(this.options.onInvalidHandler)&&this.options.onInvalidHandler.call(null,o,r[m],c[l].pattern),r.splice(m,1),m-=1):l&&m<=s&&n&&s>this.maskValue.length&&!e&&r.splice(m,0,l);return i=r.join(""),h(this.options.onComplete)&&r.length===u.length&&this.options.onComplete.call(null,i),i.length<=u.length?this.maskValue=i:i.length>u.length&&(a=i.length-u.length,r.splice(u.length,a),this.maskValue=r.join("")),this.maskValue},destroyEvents:function(){e.call(this)}},t.MaskIt=n}(window);